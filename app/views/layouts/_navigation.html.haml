%nav.navbar-default.navbar-static-side{role: "navigation"}
  .sidebar-collapse
    %ul#side-menu.nav.metismenu
      %li.nav-header
        .dropdown.profile-element
          = link_to "#", class: "dropdown-toggle", data: { toggle: "dropdown" } do
            %span.clear
              %span.block.m-t-xs
                %strong.font-bold= current_user.full_name
              %span.text-muted.text-xs.block
                = current_user.role.try(:name)
                %b.caret
          %ul.dropdown-menu.animated.fadeInRight.m-t-xs
            %li
              = link_to "Profile", profile_path
            %li
              = link_to "Logout", destroy_user_session_path, method: :delete
        .logo-element
          LK
      - if can?(:index, JournalEntrySession) || can?(:index, JournalEntry)
        %li{class: "#{'active' if %w(journal_entry_sessions journal_entries accounts account_main_types account_sub_types account_types dynamic_menus).include? controller_name}"}
          = link_to '#' do
            %i.fa.fa-area-chart
            %span.nav-label Finance
            %span.fa.arrow
          %ul.nav.nav-second-level
            - if can? :index, AccountMainType
              %li{class: "#{'active' if controller_name == 'account_main_types' }"}
                = link_to account_main_types_path do
                  %i.fa.fa-globe
                  %span.nav-label Header Accounts
            - if can? :index, AccountSubType
              %li{class: "#{'active' if controller_name == 'account_sub_types' }"}
                = link_to account_sub_types_path do
                  %i.fa.fa-folder-open-o
                  %span.nav-label Sub Headers
            - if can? :index, AccountType
              %li{class: "#{'active' if controller_name == 'account_types' }"}
                = link_to account_types_path do
                  %i.fa.fa-cube
                  %span.nav-label Account Lists
            - if can? :index, Account
              %li{class: "#{'active' if controller_name == 'accounts' }"}
                = link_to accounts_path do
                  %i.fa.fa-book
                  %span.nav-label Chart of Accounts
            - if can? :create, JournalEntrySession
              %li{class: "#{'active' if controller_name == 'journal_entry_sessions' || controller_name == 'journal_entries'}"}
                - if current_user.has_active_journal_entry_session?
                  = link_to journal_entry_session_journal_entries_path(current_user.active_journal_entry_session) do
                    %i.fa.fa-calendar-check-o
                    %span.nav-label Add Journal Entries
                - else
                  = link_to root_path do
                    %i.fa.fa-calendar-check-o
                    %span.nav-label Add Journal Entries
            - if can? :index, DynamicMenu
              %li{class: "#{'active' if controller_name == 'dynamic_menus' }"}
                = link_to dynamic_menus_path do
                  %i.fa.fa-snowflake-o
                  %span.nav-label Dynamic Menus

        %li{class: "#{'active' if controller_name == 'transactions'}"}
          = link_to '#' do
            %i.fa.fa-database
            %span.nav-label Transactions
            %span.fa.arrow
          %ul.nav.nav-second-level
            - DynamicMenu.all.each do |dynamic_menu|
              %li{class: "#{'active' if dynamic_menu.id == params[:dynamic_menu_id].to_i}"}
                = link_to new_dynamic_menu_transaction_path(dynamic_menu) do
                  %i.fa.fa-bank
                  %span.nav-label= dynamic_menu.name
      - if can? :index, LeaveApplication
        %li{class: "#{'active' if controller_name == 'leave_applications'}"}
          = link_to leave_applications_path do
            %i.fa.fa-bed
            %span.nav-label Leave Applications
      - if can? :index, Employee
        %li{class: "#{'active' if controller_name == 'employees' }"}
          = link_to employees_path do
            %i.fa.fa-male
            %span.nav-label Employee Section
      - if can?(:index, Department) || can?(:index, JobTitle) || can?(:index, Currency) || can?(:index, AllowanceType) || can?(:index, VacationType) || can?(:index, AttachmentType) || can?(:index, Role)
        %li{class: "#{'active' if %w(departments job_titles currencies allowance_types vacation_types attachment_types roles).include? controller_name}"}
          = link_to '#' do
            %i.fa.fa-cogs
            %span.nav-label Settings
            %span.fa.arrow
          %ul.nav.nav-second-level
            - if can? :index, Department
              %li{class: "#{'active' if controller_name == 'departments'}"}
                = link_to departments_path do
                  %i.fa.fa-bank
                  %span.nav-label Departments
            - if can? :index, JobTitle
              %li{class: "#{'active' if controller_name == 'job_titles'}"}
                = link_to job_titles_path do
                  %i.fa.fa-briefcase
                  %span.nav-label Manage Job Titles
            - if can? :index, Currency
              %li{class: "#{'active' if controller_name == 'currencies'}"}
                = link_to currencies_path do
                  %i.fa.fa-money
                  %span.nav-label Currencies
            - if can? :index, AllowanceType
              %li{class: "#{'active' if controller_name == 'allowance_types'}"}
                = link_to allowance_types_path do
                  %i.fa.fa-bar-chart-o
                  %span.nav-label Allowance Types
            - if can? :index, VacationType
              %li{class: "#{'active' if controller_name == 'vacation_types'}"}
                = link_to vacation_types_path do
                  %i.fa.fa-plane
                  %span.nav-label Vacation Types
            - if can? :index, AttachmentType
              %li{class: "#{'active' if controller_name == 'attachment_types'}"}
                = link_to attachment_types_path do
                  %i.fa.fa-paperclip
                  %span.nav-label Attachment Types
            - if can? :index, Role
              %li{class: "#{'active' if controller_name == 'roles'}"}
                = link_to roles_path do
                  %i.fa.fa-user-circle-o
                  %span.nav-label Roles
            - if can? :index, Branch
              %li{class: "#{'active' if controller_name == 'branches'}"}
                = link_to branches_path do
                  %i.fa.fa-building
                  %span.nav-label Manage Branches
